<div class="container">

  <section class="flex items-center justify-center min-h-screen bg-gray-700 bg-opacity-70">
    <div class="text-center px-4 w-full max-w-lg">
      <h2 class="text-5xl font-bold mb-6">Crea una nuova sfida</h2>

      <%= form_with model: @challenge, local: true, class: "bg-gray-800 p-8 rounded-lg shadow-lg" do |f| %>

        <!-- Descrizione dell'esercizio -->
        <div class="mb-8">
          <%= f.label :description, "Descrizione dell'esercizio", class: "block text-white text-left text-xl mb-4" %>
          <%= f.text_area :description, rows: 4, class: "w-full px-4 py-2 rounded-lg bg-gray-600 text-white" %>
        </div>

        <!-- Input e Output Attesi -->
        <div class="mb-8">
          <div id="input-output-pairs" class="space-y-6">
            <h3 class="text-2xl text-left text-white mb-4">Input e Output Attesi</h3>

            <%= f.fields_for :test_cases do |tc| %>
              <div class="flex justify-center space-x-16">
                <div class="w-1/2">
                  <%= tc.label :input_example, "Input", class: "block text-white text-center text-xl mb-4" %>
                  <%= tc.text_field :input_example, class: "w-full px-4 py-2 rounded-lg bg-gray-600 text-white mb-6" %>
                </div>
                <div class="w-1/2">
                  <%= tc.label :expected_output, "Output", class: "block text-white text-center text-xl mb-4" %>
                  <%= tc.text_field :expected_output, class: "w-full px-4 py-2 rounded-lg bg-gray-600 text-white mb-6" %>
                </div>
              </div>
            <% end %>
          </div>

          <!-- Pulsante per aggiungere nuovi campi -->
          <div class="text-right mt-4">
            <button type="button" id="add-test-case" class="bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded transition duration-300 mb-6">Aggiungi un'altra coppia</button>
          </div>
        </div>

        <%= form_with model: @challenge, url: challenges_path do |f| %>
          <!-- Altri campi del form qui -->

          <div class="flex justify-center space-x-10 mt-10">
            <%= f.submit "Propose", class: "bg-green-600 hover:bg-green-800 text-white font-bold py-3 px-6 rounded transition duration-300" %>
            <%= link_to "Quit", root_path, class: "bg-red-600 hover:bg-red-800 text-white font-bold py-3 px-6 rounded ml-4 transition duration-300" %>

          </div>
        <% end %>

      <% end %>
    </div>
  </section>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const addTestCaseButton = document.getElementById('add-test-case');
        const inputOutputPairsContainer = document.getElementById('input-output-pairs');

        addTestCaseButton.addEventListener('click', function() {
            const newTestCaseHTML = `
        <div class="flex justify-center space-x-16 mb-4">
          <div class="w-1/2">
            <label class="block text-white text-center text-xl mb-2">Input</label>
            <input type="text" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white mb-6" />
          </div>
          <div class="w-1/2">
            <label class="block text-white text-center text-xl mb-2">Output</label>
            <input type="text" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white mb-6" />
          </div>
        </div>`;

            inputOutputPairsContainer.insertAdjacentHTML('beforeend', newTestCaseHTML);
        });
    });
</script>
