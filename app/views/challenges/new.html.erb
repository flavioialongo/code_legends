<style>
    .button-container {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

    .button {
        font-weight: bold;
        padding: 12px 24px;
        border-radius: 8px;
        color: white;
        transition: background-color 0.3s;
        margin: 0 12px;
    }

    .button.propose {
        background-color: #38a169;
    }

    .button.propose:hover {
        background-color: #2f855a;
    }

    .button.quit {
        background-color: #e53e3e;
    }

    .button.quit:hover {
        background-color: #c53030;
    }
</style>

<div class="container mx-auto h-screen">
  <section class="flex items-center justify-center h-full bg-gray-700 bg-opacity-70">
    <div class="text-center px-6 w-full max-w-3xl">
      <h2 class="text-5xl font-bold mb-12 text-white">Crea una nuova sfida</h2>

      <form class="bg-gray-800 p-12 rounded-lg shadow-lg" action="/challenges" accept-charset="UTF-8" method="post">
        <input type="hidden" name="authenticity_token" value="CKWPTJyoG2s5uB1xpAxz_91I2ip3QYo-J2G82aHTFwDIWsoIsjxAUKA0ObLCxSEkFf7_TaTAaU0_U6JDi4l8iA" autocomplete="off">

        <!-- Descrizione dell'esercizio -->
        <div class="mb-10">
          <label class="block text-white text-left text-xl mb-4" for="challenge_description">Descrizione dell'esercizio</label>
          <textarea rows="4" class="w-full px-4 py-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" name="challenge[description]" id="challenge_description"></textarea>
        </div>

        <!-- Input e Output Attesi -->
        <div class="mb-6">
          <div id="input-output-pairs" class="space-y-10">
            <h3 class="text-2xl text-center text-white mb-8">Input e Output Attesi</h3>

            <div class="flex justify-center space-x-8 mb-6">
              <div class="w-1/2">
                <label class="block text-white text-center text-xl mb-2" for="challenge_test_cases_attributes_0_input_example">Input</label>
                <input class="w-full px-6 py-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" type="text" name="challenge[test_cases_attributes][0][input_example]" id="challenge_test_cases_attributes_0_input_example">
              </div>
              <div class="w-1/2">
                <label class="block text-white text-center text-xl mb-2" for="challenge_test_cases_attributes_0_expected_output">Output</label>
                <input class="w-full px-6 py-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" type="text" name="challenge[test_cases_attributes][0][expected_output]" id="challenge_test_cases_attributes_0_expected_output">
              </div>
            </div>
          </div>

          <!-- Pulsante per aggiungere nuovi campi -->
          <div class="text-center mt-16 mb-6">
            <button type="button" id="add-test-case" class="bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-8 rounded transition duration-300">Aggiungi un'altra coppia</button>
          </div>
        </div>

        <!-- Spaziatura tra i pulsanti -->
        <div class="button-container">
          <input type="submit" name="commit" value="Propose" class="button propose">
          <button onclick="window.location.href='/'" class="button quit">Quit</button>
        </div>
      </form>
    </div>
  </section>
</div>

<script>
    document.addEventListener("turbo:load", function() {
        const addTestCaseButton = document.getElementById('add-test-case');
        const inputOutputPairsContainer = document.getElementById('input-output-pairs');
        let testCaseIndex = 1;

        addTestCaseButton.addEventListener('click', function() {
            const newTestCaseHTML = `
        <div class="flex justify-center space-x-8 mb-6">
          <div class="w-1/2">
            <label class="block text-white text-center text-xl mb-2">Input</label>
            <input type="text" name="challenge[test_cases_attributes][${testCaseIndex}][input_example]" class="w-full px-6 py-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" />
          </div>
          <div class="w-1/2">
            <label class="block text-white text-center text-xl mb-2">Output</label>
            <input type="text" name="challenge[test_cases_attributes][${testCaseIndex}][expected_output]" class="w-full px-6 py-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" />
          </div>
        </div>`;

            inputOutputPairsContainer.insertAdjacentHTML('beforeend', newTestCaseHTML);
            testCaseIndex++;
        });
    });
</script>
