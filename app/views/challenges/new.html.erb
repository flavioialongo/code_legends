<div class="container mx-auto h-screen">
  <section class="flex items-center justify-center h-full bg-gray-700 bg-opacity-70">
    <div class="text-center px-4 w-full max-w-3xl">
      <h2 class="text-5xl font-bold mb-10 text-white">Crea una nuova sfida</h2>

      <form class="bg-gray-800 p-10 rounded-lg shadow-lg" action="/challenges" accept-charset="UTF-8" method="post">
        <input type="hidden" name="authenticity_token" value="CKWPTJyoG2s5uB1xpAxz_91I2ip3QYo-J2G82aHTFwDIWsoIsjxAUKA0ObLCxSEkFf7_TaTAaU0_U6JDi4l8iA" autocomplete="off">

        <!-- Descrizione dell'esercizio -->
        <div class="mb-8">
          <label class="block text-white text-left text-xl mb-4" for="challenge_description">Descrizione dell'esercizio</label>
          <textarea rows="4" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" name="challenge[description]" id="challenge_description"></textarea>
        </div>

        <!-- Input e Output Attesi -->
        <div class="mb-8">
          <div id="input-output-pairs" class="space-y-8">
            <h3 class="text-2xl text-center text-white mb-6">Input e Output Attesi</h3>

            <div class="flex justify-center space-x-6">
              <div class="w-1/2">
                <label class="block text-white text-center text-xl mb-2" for="challenge_test_cases_attributes_0_input_example">Input</label>
                <input class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" type="text" name="challenge[test_cases_attributes][0][input_example]" id="challenge_test_cases_attributes_0_input_example">
              </div>
              <div class="w-1/2">
                <label class="block text-white text-center text-xl mb-2" for="challenge_test_cases_attributes_0_expected_output">Output</label>
                <input class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" type="text" name="challenge[test_cases_attributes][0][expected_output]" id="challenge_test_cases_attributes_0_expected_output">
              </div>
            </div>
          </div>

          <!-- Pulsante per aggiungere nuovi campi -->
          <div class="text-center mt-12">
            <button type="button" id="add-test-case" class="bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-6 rounded transition duration-300">Aggiungi un'altra coppia</button>
          </div>
        </div>

        <div class="flex justify-center mt-16">
          <input type="submit" name="commit" value="Propose" class="bg-green-600 hover:bg-green-800 text-white font-bold py-3 px-8 rounded transition duration-300 mx-4" data-disable-with="Propose">
          <a class="bg-red-600 hover:bg-red-800 text-white font-bold py-3 px-8 rounded transition duration-300 mx-4" href="/">Quit</a>
        </div>
      </form>
    </div>
  </section>
</div>

<script>
    document.addEventListener("turbo:load", function() {
        const addTestCaseButton = document.getElementById('add-test-case');
        const inputOutputPairsContainer = document.getElementById('input-output-pairs');
        let testCaseIndex = 1;

        addTestCaseButton.addEventListener('click', function() {
            const newTestCaseHTML = `
    <div class="flex justify-center space-x-6">
      <div class="w-1/2">
        <label class="block text-white text-center text-xl mb-2">Input</label>
        <input type="text" name="challenge[test_cases_attributes][${testCaseIndex}][input_example]" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" />
      </div>
      <div class="w-1/2">
        <label class="block text-white text-center text-xl mb-2">Output</label>
        <input type="text" name="challenge[test_cases_attributes][${testCaseIndex}][expected_output]" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" />
      </div>
    </div>`;

            inputOutputPairsContainer.insertAdjacentHTML('beforeend', newTestCaseHTML);
            testCaseIndex++;
        });
    });
</script>
