<div class="container mx-auto h-screen overflow-auto">
  <section class="flex items-center justify-center min-h-full bg-gradient-to-br from-gray-800 to-gray-600 bg-opacity-70">
    <div class="text-center px-8 py-16 w-full max-w-3xl">
      <h2 class="text-5xl font-extrabold mb-12 text-white">Crea una nuova sfida</h2>

      <form class="bg-gray-900 p-12 rounded-2xl shadow-2xl" action="/challenges" accept-charset="UTF-8" method="post">
        <input type="hidden" name="authenticity_token" value="CKWPTJyoG2s5uB1xpAxz_91I2ip3QYo-J2G82aHTFwDIWsoIsjxAUKA0ObLCxSEkFf7_TaTAaU0_U6JDi4l8iA" autocomplete="off">

        <div class="mb-10">
          <label class="block text-white text-left text-xl font-semibold mb-4" for="challenge_description">Descrizione dell'esercizio</label>
          <textarea rows="4" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none resize-none" name="challenge[description]" id="challenge_description"></textarea>
        </div>

        <div class="mb-6">
          <div id="input-output-pairs" class="space-y-10">
            <h3 class="text-2xl text-center text-white mb-8 font-semibold">Input e Output Attesi</h3>

            <div class="flex justify-center space-x-8 mb-6">
              <div class="w-1/2">
                <label class="block text-white text-center text-xl font-semibold mb-2" for="challenge_test_cases_attributes_0_input_example">Input</label>
                <input class="w-full px-6 py-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none" type="text" name="challenge[test_cases_attributes][0][input_example]" id="challenge_test_cases_attributes_0_input_example">
              </div>
              <div class="w-1/2">
                <label class="block text-white text-center text-xl font-semibold mb-2" for="challenge_test_cases_attributes_0_expected_output">Output</label>
                <input class="w-full px-6 py-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none" type="text" name="challenge[test_cases_attributes][0][expected_output]" id="challenge_test_cases_attributes_0_expected_output">
              </div>
            </div>
          </div>

          <div class="text-center mt-16 mb-6">
            <button type="button" id="add-test-case" class="bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-8 rounded-full transition duration-300">Aggiungi un'altra coppia</button>
          </div>
        </div>

        <div class="flex justify-center mt-5 mb-6 space-x-8">
          <input type="submit" name="commit" value="Propose" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full transition duration-300 mr-4">
          <button type="button" onclick="window.location.href='/'" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full transition duration-300">Quit</button>
        </div>
      </form>
    </div>
  </section>
</div>

<script>
    document.addEventListener("turbo:load", function() {
        const addTestCaseButton = document.getElementById('add-test-case');
        const inputOutputPairsContainer = document.getElementById('input-output-pairs');
        let testCaseIndex = 1;

        addTestCaseButton.addEventListener('click', function() {
            const newTestCaseHTML = `
        <div class="flex justify-center space-x-8 mb-6">
          <div class="w-1/2">
            <label class="block text-white text-center text-xl font-semibold mb-2">Input</label>
            <input type="text" name="challenge[test_cases_attributes][${testCaseIndex}][input_example]" class="w-full px-6 py-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none" />
          </div>
          <div class="w-1/2">
            <label class="block text-white text-center text-xl font-semibold mb-2">Output</label>
            <input type="text" name="challenge[test_cases_attributes][${testCaseIndex}][expected_output]" class="w-full px-6 py-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none" />
          </div>
        </div>`;

            inputOutputPairsContainer.insertAdjacentHTML('beforeend', newTestCaseHTML);
            testCaseIndex++;
        });
    });
</script>
